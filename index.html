<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>HAYATO DEVELOP ONLY</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Fira Mono for code style -->
  <link href="https://fonts.googleapis.com/css2?family=Fira+Mono:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* Reset */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { width: 100%; height: 100%; background: #0a0f0d; color: #b2ffbe; font-family: 'Fira Mono', 'Consolas', monospace; }

    body { min-height: 100vh; overflow: hidden; }

    /* Matrix Rain */
    #matrix-canvas {
      position: fixed;
      z-index: 1;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      pointer-events: none;
      opacity: 0.18;
    }

    /* Main UI */
    .container {
      position: relative;
      z-index: 5;
      width: 100vw; height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      padding: 18px 30px;
      background: rgba(16,32,16,0.96);
      font-size: 2rem;
      font-weight: bold;
      letter-spacing: 2.5px;
      border-bottom: 2px solid #1a4d1a;
      color: #80ff90;
      box-shadow: 0 2px 8px #112 0.3;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    header .btns {
      display: flex;
      gap: 12px;
    }
    button, .button {
      background: #191c18;
      border: 2px solid #3fa139;
      color: #b2ffbe;
      font-family: inherit;
      font-size: 1rem;
      padding: 7px 16px;
      border-radius: 7px;
      cursor: pointer;
      transition: all 0.2s;
    }
    button:hover, .button:hover {
      background: #263e29;
      color: #5aff63;
      border-color: #74ff7e;
    }
    .main-content {
      flex: 1;
      display: flex;
      height: 1px;
      min-height: 0;
    }
    aside {
      background: rgba(11,23,13,0.92);
      border-right: 1.5px solid #267d39;
      padding: 15px;
      width: 210px;
      min-width: 135px;
      color: #2bff3e;
      font-size: 1.1rem;
      display: flex;
      flex-direction: column;
      gap: 18px;
      z-index: 6;
    }
    aside .button {
      width: 100%;
      margin-bottom: 10px;
    }
    aside .host-info {
      background: #142019;
      border: 1px solid #2cebbc88;
      border-radius: 7px;
      padding: 14px 10px 10px 10px;
      margin-top: 14px;
      color: #b8ffd1;
      font-size: 1em;
    }
    .workarea {
      flex: 1;
      background: #121e13;
      display: flex;
      flex-direction: row;
      min-width: 0;
      min-height: 0;
    }
    /* Code Editor/Preview Split */
    .editor-preview {
      flex: 2;
      display: flex;
      flex-direction: column;
      min-width: 0;
      min-height: 0;
    }
    .tab-bar {
      background: #112615;
      color: #84ff99;
      display: flex;
      gap: 10px;
      padding: 6px 15px;
      border-bottom: 2px solid #235d2b;
    }
    .tab {
      cursor: pointer;
      font-weight: bold;
      padding: 3px 12px;
      border-radius: 5px 5px 0 0;
      background: transparent;
      transition: background 0.18s;
    }
    .tab.active {
      background: #1d3d22;
      color: #a8ffb7;
    }
    .editor-section, .preview-section, .hex-section {
      flex: 1;
      display: none;
      min-height: 0;
      min-width: 0;
      background: #111b14;
      overflow: auto;
      padding: 0;
      position: relative;
      z-index: 8;
    }
    .editor-section.active, .preview-section.active, .hex-section.active {
      display: block;
    }
    .editor-section { padding: 0; }
    #editor {
      width: 100%;
      height: 100%;
      border: none;
      font-size: 1rem;
      background: #111b14;
      color: #b2ffbe;
      font-family: 'Fira Mono', 'Consolas', monospace;
      outline: none;
      resize: none;
      padding: 18px;
    }
    /* Preview */
    .preview-section {
      background: #091c0d;
      padding: 0;
      overflow: hidden;
      position: relative;
    }
    #preview-iframe {
      width: 100%;
      height: 100%;
      border: none;
      background: #090e09;
    }
    /* Hex Editor */
    .hex-section {
      background: #0e1921;
      color: #85f2ff;
      font-size: 1rem;
      padding: 13px 18px;
      font-family: 'Fira Mono', 'Consolas', monospace;
      overflow-x: auto;
      white-space: pre;
      z-index: 9;
      min-width: 0;
    }
    .hex-address { color: #1df6cc; margin-right: 8px; }
    .hex-bytes { color: #b1f9ff; }
    .hex-ascii { color: #ff79c6; }
    /* Language Reader */
    .lang-reader {
      background: linear-gradient(90deg, #0f1825, #091c0d 70%);
      color: #61ffbe;
      padding: 12px 20px;
      border-radius: 8px;
      margin: 20px 18px;
      font-size: 1.07rem;
      box-shadow: 0 1px 12px #212 0.07;
    }
    .lang-html { color: #85ff8e; }
    .lang-css { color: #5edfff; }
    .lang-js { color: #ffc76e; }
    .lang-other { color: #ff6e7a; }
    /* Drag & Drop Hosting */
    .drop-zone {
      margin: 18px;
      border: 2px dashed #26ebc7;
      background: #222a22cc;
      color: #a5ffe3;
      border-radius: 13px;
      padding: 34px 18px;
      text-align: center;
      font-size: 1.13em;
      transition: background 0.2s, border-color 0.2s;
      cursor: pointer;
    }
    .drop-zone.dragover {
      background: #1b2f1b;
      border-color: #4bffdf;
      color: #eafff2;
    }
    .hosted-link {
      word-break: break-all;
      color: #31e7ff;
      margin: 10px 0 0 0;
      display: block;
      font-weight: bold;
    }
    /* Popup Modal */
    .modal-bg {
      position: fixed; left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.54); z-index: 100;
      display: none; align-items: center; justify-content: center;
    }
    .modal-bg.active { display: flex; }
    .modal {
      background: #1b2e20;
      border: 2px solid #29ff47;
      color: #c7fbe2;
      padding: 30px 35px 25px 35px;
      border-radius: 13px;
      min-width: 330px;
      box-shadow: 0 5px 35px #00ff0b33;
      text-align: center;
      z-index: 101;
    }
    .modal .modal-title { font-size: 1.25rem; color: #7affd1; margin-bottom: 18px; }
    .modal .modal-btns { margin-top: 24px; display: flex; gap: 18px; justify-content: center; }
    /* Bug highlight */
    .bug-highlight {
      background: rgba(255, 45, 99, 0.25) !important;
      outline: 2px solid #ff006a !important;
      animation: bugblink 1.2s infinite alternate;
    }
    @keyframes bugblink {
      from { box-shadow: 0 0 10px #ff006a55; }
      to   { box-shadow: 0 0 18px #ff006a; }
    }
    /* Scrollbar */
    ::-webkit-scrollbar { width: 8px; background: #141a14; }
    ::-webkit-scrollbar-thumb { background: #1a4827; border-radius: 5px; }
    ::selection { background: #63ff8c50; }
    /* Responsive */
    @media (max-width: 750px) {
      aside { display: none; }
      .main-content { flex-direction: column; }
      .workarea { flex-direction: column; }
      .editor-preview { min-height: 220px; }
      .drop-zone { margin: 10px 2vw; padding: 24px 3vw; }
    }
  </style>
</head>
<body>
<canvas id="matrix-canvas"></canvas>
<div class="container">
  <header>
    HAYATO DEVELOP ONLY
    <div class="btns">
      <button id="uploadBtn">Upload File</button>
      <button id="bugsBtn" title="Find bugs and highlight">Find Bugs</button>
      <button id="playBtn" title="Play/Live Preview">‚ñ∂ Play</button>
      <button id="hostBtn" title="Host your site!">üåê Host</button>
    </div>
  </header>
  <div class="main-content">
    <aside>
      <div>
        <div style="font-weight: bold; color: #86ffbc;">Tools</div>
        <button class="button" id="openHexBtn">HEX Editor</button>
        <button class="button" id="openWebDevBtn">Web Developer</button>
        <button class="button" id="openHostBtn">Hosting Options</button>
      </div>
      <div>
        <div style="font-weight: bold; color: #6ee0ff; margin-top: 20px;">Info</div>
        <div style="font-size:0.97em; color:#a6ffc8; margin-top: 7px;">
          Upload files, code, preview, debug, hex edit, or <b>drag &amp; host</b> your site instantly!
        </div>
      </div>
      <div class="host-info">
        <b>Available Free Hosting Domains:</b>
        <ul style="margin: 7px 0 0 14px; font-size:0.97em;">
          <li>Vercel (<span style="color:#55fdc6;">*.vercel.app</span>)</li>
          <li>Netlify (<span style="color:#55d3fd;">*.netlify.app</span>)</li>
          <li>GitHub Pages (<span style="color:#fda655;">github.io</span>)</li>
          <li>Neocities (<span style="color:#f782c2;">neocities.org</span>)</li>
          <li>CTWS (<span style="color:#b2ffbe;">ct.ws</span>)</li>
          <li>Surge.sh (<span style="color:#b3f0ff;">surge.sh</span>)</li>
        </ul>
        <div style="margin-top:10px;font-size:0.93em;opacity:0.7;">
          <i>Drag your site folder or zip file below to host it easily!</i>
        </div>
      </div>
    </aside>
    <div class="workarea">
      <div class="editor-preview" id="webDevView">
        <div class="tab-bar">
          <span class="tab active" id="tab-code">Code</span>
          <span class="tab" id="tab-preview">Preview</span>
          <span class="tab" id="tab-lang">Languages Read</span>
          <span class="tab" id="tab-host">Host</span>
        </div>
        <div class="editor-section active" id="codeSection">
          <textarea id="editor" spellcheck="false" autocomplete="off" autocorrect="off" autocapitalize="off" placeholder="Write your HTML/CSS/JS code here..."></textarea>
        </div>
        <div class="preview-section" id="previewSection">
          <iframe id="preview-iframe" sandbox="allow-scripts allow-same-origin"></iframe>
        </div>
        <div class="lang-reader" id="langSection" style="display:none;">
          <div><span class="lang-html">HTML:</span> <span id="htmlLines">0</span> lines</div>
          <div><span class="lang-css">CSS :</span> <span id="cssLines">0</span> lines</div>
          <div><span class="lang-js">JS  :</span> <span id="jsLines">0</span> lines</div>
          <div><span class="lang-other">Other:</span> <span id="otherLines">0</span> lines</div>
        </div>
        <div class="editor-section" id="hostSection" style="display:none;">
          <div class="drop-zone" id="fileDropZone">
            <div>üóÇÔ∏è <b>Drag &amp; Drop</b> your site file or folder here to host it on:</div>
            <ul style="margin: 14px 0 0 0; padding-left: 0; list-style: inside disc; color: #fff;">
              <li><b>Vercel</b> <span style="color:#55fdc6;">*.vercel.app</span></li>
              <li><b>Netlify</b> <span style="color:#55d3fd;">*.netlify.app</span></li>
              <li><b>CTWS</b> <span style="color:#b2ffbe;">ct.ws</span></li>
            </ul>
            <div style="font-size:0.93em;opacity:0.80;margin-top:8px;">
              (No login required for CTWS, for Vercel/Netlify you may need free account)
            </div>
            <div id="hostResult" style="margin-top:18px;"></div>
          </div>
        </div>
      </div>
      <div class="hex-section" id="hexView" style="display:none;">
        <div id="hexContent">No file loaded.</div>
      </div>
    </div>
  </div>
</div>
<!-- Modal -->
<div class="modal-bg" id="modalBg">
  <div class="modal" id="modal">
    <div class="modal-title" id="modalTitle">Open As...</div>
    <div class="modal-btns">
      <button class="button" id="modalHex">HEX Editor</button>
      <button class="button" id="modalWebDev">Web Developer</button>
    </div>
  </div>
</div>
<input type="file" id="fileInput" style="display:none;">

<script>
/* MATRIX EFFECT */
const canvas = document.getElementById('matrix-canvas');
const ctx = canvas.getContext('2d');
function resizeMatrix() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resizeMatrix();
window.addEventListener('resize', resizeMatrix);

// CHARS
const matrixChars = '„Ç¢„Ç°„Ç§„Ç£„Ç¶„É¥„Ç®„Çß„Ç™„Ç´„Ç¨„Ç≠„ÇÆ„ÇØ„Ç∞„Ç±„Ç≤„Ç≥„Ç¥„Çµ„Ç∂„Ç∑„Ç∏„Çπ„Ç∫„Çª„Çº„ÇΩ„Çæ„Çø„ÉÄ„ÉÅ„ÉÉ„ÉÇ„ÉÖ„ÉÜ„Éá„Éà„Éâ„Éä„Éã„Éå„Éç„Éé„Éè„Éê„Éë„Éí„Éì„Éî„Éï„Éñ„Éó„Éò„Éô„Éö„Éõ„Éú„Éù„Éû„Éü„É†„É°„É¢„É§„É•„É¶„Éß„É®„É©„É™„É´„É¨„É≠„ÉØ„É≤„É≥ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
const fontSize = 20, columns = Math.floor(canvas.width / fontSize);
let drops = Array.from({length: columns}, () => Math.random() * canvas.height / fontSize);

function drawMatrix() {
  ctx.fillStyle = 'rgba(10,16,13,0.19)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  ctx.font = fontSize + "px monospace";
  for(let i=0; i<drops.length; i++) {
    let text = matrixChars[Math.floor(Math.random()*matrixChars.length)];
    let x = i * fontSize, y = drops[i] * fontSize;
    ctx.fillStyle = `hsl(${110+Math.random()*60}, 92%, 62%)`;
    ctx.fillText(text, x, y);
    if(y > canvas.height && Math.random() > 0.96) drops[i] = 0;
    drops[i]++;
  }
}
setInterval(drawMatrix, 48);

// UI LOGIC
const tabCode = document.getElementById('tab-code');
const tabPreview = document.getElementById('tab-preview');
const tabLang = document.getElementById('tab-lang');
const tabHost = document.getElementById('tab-host');
const codeSection = document.getElementById('codeSection');
const previewSection = document.getElementById('previewSection');
const langSection = document.getElementById('langSection');
const hostSection = document.getElementById('hostSection');
const editor = document.getElementById('editor');
const iframe = document.getElementById('preview-iframe');
const playBtn = document.getElementById('playBtn');
const bugsBtn = document.getElementById('bugsBtn');
const hostBtn = document.getElementById('hostBtn');
const openHostBtn = document.getElementById('openHostBtn');

function setTab(tab) {
  tabCode.classList.remove('active');
  tabPreview.classList.remove('active');
  tabLang.classList.remove('active');
  tabHost.classList.remove('active');
  codeSection.classList.remove('active');
  previewSection.classList.remove('active');
  langSection.style.display = 'none';
  hostSection.style.display = 'none';
  if(tab === 'code') {
    tabCode.classList.add('active');
    codeSection.classList.add('active');
  } else if(tab === 'preview') {
    tabPreview.classList.add('active');
    previewSection.classList.add('active');
  } else if(tab === 'lang') {
    tabLang.classList.add('active');
    langSection.style.display = '';
  } else if(tab === 'host') {
    tabHost.classList.add('active');
    hostSection.style.display = '';
  }
}
tabCode.onclick = ()=>setTab('code');
tabPreview.onclick = ()=>setTab('preview');
tabLang.onclick = ()=>{ updateLangRead(); setTab('lang'); };
tabHost.onclick = ()=>setTab('host');
hostBtn.onclick = ()=>setTab('host');
openHostBtn.onclick = ()=>setTab('host');

// Play/Live Preview
function runPreview() {
  const code = editor.value;
  iframe.srcdoc = code;
  setTab('preview');
}
playBtn.onclick = runPreview;

// Live update preview on Play OR Ctrl+Enter
editor.addEventListener('keydown', function(e){
  if(e.ctrlKey && e.key === 'Enter') {
    runPreview();
    e.preventDefault();
  }
});

// Language Reader
function updateLangRead() {
  const code = editor.value;
  let htmlLines=0, cssLines=0, jsLines=0, otherLines=0;
  let html = code.match(/<html[\s\S]*?>[\s\S]*?<\/html>/gmi) || [];
  let css  = code.match(/<style[\s\S]*?>[\s\S]*?<\/style>/gmi) || [];
  let js   = code.match(/<script[\s\S]*?>[\s\S]*?<\/script>/gmi) || [];
  html.forEach(block=>htmlLines += block.split('\n').length);
  css.forEach(block=>cssLines += block.split('\n').length);
  js.forEach(block=>jsLines += block.split('\n').length);

  let other = code.replace(/<html[\s\S]*?>[\s\S]*?<\/html>/gmi, '')
                  .replace(/<style[\s\S]*?>[\s\S]*?<\/style>/gmi, '')
                  .replace(/<script[\s\S]*?>[\s\S]*?<\/script>/gmi, '');
  otherLines = other.split('\n').filter(x=>x.trim()).length;

  document.getElementById('htmlLines').textContent = htmlLines;
  document.getElementById('cssLines').textContent = cssLines;
  document.getElementById('jsLines').textContent = jsLines;
  document.getElementById('otherLines').textContent = otherLines;
}

// HEX EDITOR
const hexView = document.getElementById('hexView');
const webDevView = document.getElementById('webDevView');
function showHexEditor(content) {
  webDevView.style.display = 'none';
  hexView.style.display = 'block';
  document.getElementById('hexContent').innerHTML = renderHex(content);
}
function showWebDev() {
  hexView.style.display = 'none';
  webDevView.style.display = 'flex';
}

function renderHex(buffer) {
  if(typeof buffer === 'string') {
    buffer = new TextEncoder().encode(buffer);
  }
  let lines = [];
  for(let i=0; i<buffer.length; i+=16) {
    const addr = ('00000000'+i.toString(16)).slice(-8);
    const bytes = Array.from(buffer.slice(i,i+16)).map(b=>('0'+b.toString(16)).slice(-2)).join(' ');
    const ascii = Array.from(buffer.slice(i,i+16)).map(b=>(b>=32&&b<127)?String.fromCharCode(b):'.').join('');
    lines.push(`<span class="hex-address">${addr}</span> <span class="hex-bytes">${bytes.padEnd(47,' ')}</span> <span class="hex-ascii">${ascii}</span>`);
  }
  return lines.join('\n');
}

// File Upload
const uploadBtn = document.getElementById('uploadBtn');
const fileInput = document.getElementById('fileInput');
const modalBg = document.getElementById('modalBg');
let uploadedFileContent = null, uploadedFileName = null;
let pendingFileResult = null;
uploadBtn.onclick = ()=>fileInput.click();

fileInput.onchange = function(e){
  const file = e.target.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = function(ev){
    uploadedFileContent = ev.target.result;
    uploadedFileName = file.name;
    showModal();
  };
  if(file.type.startsWith('text') || /\.(html?|css|js)$/i.test(file.name)) {
    reader.readAsText(file);
  } else {
    reader.readAsArrayBuffer(file);
  }
};
function showModal() {
  modalBg.classList.add('active');
}
function hideModal() {
  modalBg.classList.remove('active');
}
document.getElementById('modalHex').onclick = function(){
  let content = uploadedFileContent;
  if(content instanceof ArrayBuffer) content = new Uint8Array(content);
  showHexEditor(content);
  hideModal();
};
document.getElementById('modalWebDev').onclick = function(){
  if(typeof uploadedFileContent === 'string') {
    editor.value = uploadedFileContent;
    showWebDev();
    setTab('code');
  } else {
    // Try to decode as UTF-8
    let text = '';
    try {
      text = new TextDecoder().decode(new Uint8Array(uploadedFileContent));
    } catch { text = '[Binary file]'; }
    editor.value = text;
    showWebDev();
    setTab('code');
  }
  hideModal();
};
modalBg.onclick = function(e){ if(e.target === modalBg) hideModal(); };

// Aside Buttons
document.getElementById('openHexBtn').onclick = ()=>showHexEditor(editor.value);
document.getElementById('openWebDevBtn').onclick = ()=>{ showWebDev(); setTab('code'); };

// Bugs Detection (very basic!)
bugsBtn.onclick = ()=>{
  // Only works for live preview
  runPreview();
  setTimeout(()=>{
    const previewDoc = iframe.contentDocument;
    // Remove old highlights
    previewDoc.querySelectorAll('.bug-highlight').forEach(e=>e.classList.remove('bug-highlight'));
    // "Find bugs" - highlight common mistakes (unclosed tags, empty src/href, inline style issues, broken images)
    let bugs = [];
    // 1. Images with broken src
    previewDoc.querySelectorAll('img').forEach(img=>{
      img.onerror = ()=>{ img.classList.add('bug-highlight'); bugs.push(img); };
      // Try to trigger error if broken
      if(img.complete && img.naturalWidth===0) img.classList.add('bug-highlight');
    });
    // 2. Anchors with empty href
    previewDoc.querySelectorAll('a').forEach(a=>{
      if(!a.getAttribute('href') || a.getAttribute('href')==='#') {
        a.classList.add('bug-highlight'); bugs.push(a);
      }
    });
    // 3. Inputs with no name/id
    previewDoc.querySelectorAll('input').forEach(input=>{
      if(!input.name && !input.id) { input.classList.add('bug-highlight'); bugs.push(input);}
    });
    // 4. Elements with inline style errors (e.g., invalid CSS)
    previewDoc.q
